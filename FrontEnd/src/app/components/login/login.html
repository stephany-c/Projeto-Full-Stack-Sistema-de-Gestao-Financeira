<div class="auth-container">
    <mat-card class="auth-card">
        <div class="brand-header">
            <span class="logo-icon"><i class="fa-solid fa-wallet"></i></span>
            <h2>FinançaX</h2>
        </div>

        <h1>Bem-vindo!</h1>
        <p>Acesse sua conta para organizar suas finanças.</p>

        <form (ngSubmit)="onLogin()" #loginForm="ngForm" class="auth-form">
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>E-mail</mat-label>
                <mat-icon matPrefix>email</mat-icon>
                <input matInput type="email" [(ngModel)]="credentials.email" name="email" required email
                    placeholder="seu@email.com" #email="ngModel">
                <mat-error *ngIf="email.invalid && (email.dirty || email.touched)">
                    <span *ngIf="email.errors?.['required']">O e-mail é obrigatório.</span>
                    <span *ngIf="email.errors?.['email']">Digite um e-mail válido.</span>
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Senha</mat-label>
                <mat-icon matPrefix>lock</mat-icon>
                <input matInput [type]="showPassword ? 'text' : 'password'" [(ngModel)]="credentials.password"
                    name="password" required placeholder="Sua senha" (focus)="passwordFocused = true"
                    (blur)="passwordFocused = false" #password="ngModel">
                <button mat-icon-button matSuffix type="button" (mousedown)="togglePassword($event)"
                    *ngIf="passwordFocused">
                    <mat-icon>{{showPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="password.invalid && (password.dirty || password.touched)">
                    A senha é obrigatória.
                </mat-error>
            </mat-form-field>

            <div class="login-error" *ngIf="errorMessage">
                <i class="fa-solid fa-circle-exclamation"></i> {{ errorMessage }}
            </div>

            <button mat-flat-button color="primary" type="submit" class="btn-primary"
                [disabled]="!loginForm.form.valid">
                <span>Entrar</span>
                <mat-icon iconPositionEnd>arrow_forward</mat-icon>
            </button>
        </form>

        <div class="auth-footer">
            Ainda não tem conta? <a routerLink="/register">Criar conta</a>
        </div>
    </mat-card>
</div>